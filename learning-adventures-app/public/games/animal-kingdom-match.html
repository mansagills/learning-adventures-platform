<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Animal Kingdom Match - Learning Adventures</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(
          135deg,
          #2d5016 0%,
          #4a7c23 50%,
          #6b8e23 100%
        );
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 10px;
      }

      .game-container {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        width: 100%;
        max-width: 900px;
        padding: 20px;
        position: relative;
      }

      .game-header {
        text-align: center;
        margin-bottom: 15px;
      }

      .game-title {
        font-size: 2rem;
        font-weight: bold;
        color: #2d5016;
        margin-bottom: 5px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
      }

      .game-subtitle {
        font-size: 1rem;
        color: #666;
      }

      .stats-bar {
        display: flex;
        justify-content: space-around;
        background: linear-gradient(135deg, #e8f5e9, #c8e6c9);
        padding: 12px 20px;
        border-radius: 15px;
        margin-bottom: 15px;
        border: 2px solid #4caf50;
      }

      .stat {
        text-align: center;
      }

      .stat-value {
        font-size: 1.5rem;
        font-weight: bold;
        color: #2d5016;
      }

      .stat-label {
        font-size: 0.8rem;
        color: #666;
      }

      .game-area {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
      }

      .column {
        background: #f5f5f5;
        border-radius: 15px;
        padding: 15px;
      }

      .column-title {
        text-align: center;
        font-size: 1.2rem;
        font-weight: bold;
        color: #333;
        margin-bottom: 10px;
        padding-bottom: 10px;
        border-bottom: 2px dashed #ccc;
      }

      .animals-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
      }

      .animal-card {
        background: white;
        border: 3px solid #4caf50;
        border-radius: 12px;
        padding: 12px;
        text-align: center;
        cursor: grab;
        transition: all 0.2s ease;
        user-select: none;
      }

      .animal-card:hover {
        transform: scale(1.05);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .animal-card.dragging {
        opacity: 0.5;
        cursor: grabbing;
      }

      .animal-card.matched {
        background: #c8e6c9;
        border-color: #2e7d32;
        cursor: default;
        opacity: 0.7;
      }

      .animal-emoji {
        font-size: 2.5rem;
        margin-bottom: 5px;
      }

      .animal-name {
        font-size: 0.9rem;
        font-weight: bold;
        color: #333;
      }

      .habitats-grid {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .habitat-zone {
        background: white;
        border: 3px dashed #9e9e9e;
        border-radius: 12px;
        padding: 15px;
        min-height: 80px;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .habitat-zone.drag-over {
        background: #e3f2fd;
        border-color: #2196f3;
        border-style: solid;
      }

      .habitat-zone.correct {
        background: #e8f5e9;
        border-color: #4caf50;
        border-style: solid;
      }

      .habitat-zone.wrong {
        background: #ffebee;
        border-color: #f44336;
        border-style: solid;
        animation: shake 0.5s;
      }

      @keyframes shake {
        0%,
        100% {
          transform: translateX(0);
        }
        25% {
          transform: translateX(-5px);
        }
        75% {
          transform: translateX(5px);
        }
      }

      .habitat-info {
        flex-shrink: 0;
      }

      .habitat-emoji {
        font-size: 2rem;
      }

      .habitat-name {
        font-size: 0.9rem;
        font-weight: bold;
        color: #333;
      }

      .habitat-drop-area {
        flex: 1;
        min-height: 50px;
        display: flex;
        flex-wrap: wrap;
        gap: 5px;
        align-items: center;
      }

      .matched-animal {
        background: #c8e6c9;
        border-radius: 8px;
        padding: 5px 10px;
        font-size: 1.5rem;
        display: flex;
        align-items: center;
        gap: 5px;
      }

      .matched-animal span {
        font-size: 0.7rem;
      }

      /* Modals */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        justify-content: center;
        align-items: center;
        z-index: 1000;
      }

      .modal.active {
        display: flex;
      }

      .modal-content {
        background: white;
        border-radius: 20px;
        padding: 30px;
        text-align: center;
        max-width: 450px;
        width: 90%;
        animation: popIn 0.3s ease;
      }

      @keyframes popIn {
        from {
          transform: scale(0.8);
          opacity: 0;
        }
        to {
          transform: scale(1);
          opacity: 1;
        }
      }

      .modal-title {
        font-size: 2rem;
        color: #2d5016;
        margin-bottom: 15px;
      }

      .modal-emoji {
        font-size: 4rem;
        margin-bottom: 15px;
      }

      .modal-text {
        font-size: 1.1rem;
        color: #666;
        margin-bottom: 20px;
        line-height: 1.6;
      }

      .btn {
        background: linear-gradient(135deg, #4caf50, #2e7d32);
        color: white;
        border: none;
        padding: 15px 35px;
        font-size: 1.1rem;
        border-radius: 25px;
        cursor: pointer;
        transition:
          transform 0.2s,
          box-shadow 0.2s;
        margin: 5px;
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
      }

      .btn-secondary {
        background: linear-gradient(135deg, #78909c, #546e7a);
      }

      .btn-secondary:hover {
        box-shadow: 0 5px 15px rgba(84, 110, 122, 0.4);
      }

      .score-display {
        font-size: 1.5rem;
        color: #2d5016;
        margin: 15px 0;
      }

      .star {
        color: #ffc107;
        font-size: 2rem;
      }

      .instructions-list {
        text-align: left;
        margin: 15px 0;
      }

      .instructions-list li {
        margin: 10px 0;
        padding-left: 10px;
      }

      /* Timer bar */
      .timer-bar {
        width: 100%;
        height: 8px;
        background: #e0e0e0;
        border-radius: 4px;
        margin-top: 10px;
        overflow: hidden;
      }

      .timer-fill {
        height: 100%;
        background: linear-gradient(90deg, #4caf50, #8bc34a);
        border-radius: 4px;
        transition: width 1s linear;
      }

      .timer-fill.warning {
        background: linear-gradient(90deg, #ff9800, #ffc107);
      }

      .timer-fill.danger {
        background: linear-gradient(90deg, #f44336, #ff5722);
      }

      /* Level indicator */
      .level-indicator {
        display: flex;
        justify-content: center;
        gap: 8px;
        margin: 10px 0;
      }

      .level-dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: #e0e0e0;
      }

      .level-dot.active {
        background: #4caf50;
      }

      .level-dot.completed {
        background: #2e7d32;
      }

      /* Responsive */
      @media (max-width: 600px) {
        .game-area {
          grid-template-columns: 1fr;
        }

        .animals-grid {
          grid-template-columns: repeat(4, 1fr);
        }

        .animal-card {
          padding: 8px;
        }

        .animal-emoji {
          font-size: 1.8rem;
        }

        .animal-name {
          font-size: 0.7rem;
        }

        .game-title {
          font-size: 1.5rem;
        }

        .stat-value {
          font-size: 1.2rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="game-container">
      <div class="game-header">
        <h1 class="game-title">
          <span>ğŸ¦</span>
          Animal Kingdom Match
          <span>ğŸŒ</span>
        </h1>
        <p class="game-subtitle">Match animals to their natural habitats!</p>
        <div class="level-indicator" id="levelIndicator"></div>
      </div>

      <div class="stats-bar">
        <div class="stat">
          <div class="stat-value" id="scoreDisplay">0</div>
          <div class="stat-label">Score</div>
        </div>
        <div class="stat">
          <div class="stat-value" id="matchesDisplay">0/0</div>
          <div class="stat-label">Matches</div>
        </div>
        <div class="stat">
          <div class="stat-value" id="levelDisplay">1</div>
          <div class="stat-label">Level</div>
        </div>
        <div class="stat">
          <div class="stat-value" id="timeDisplay">60</div>
          <div class="stat-label">Time</div>
        </div>
      </div>

      <div class="timer-bar">
        <div class="timer-fill" id="timerFill"></div>
      </div>

      <div class="game-area">
        <div class="column">
          <div class="column-title">ğŸ¾ Animals</div>
          <div class="animals-grid" id="animalsGrid"></div>
        </div>
        <div class="column">
          <div class="column-title">ğŸ  Habitats</div>
          <div class="habitats-grid" id="habitatsGrid"></div>
        </div>
      </div>
    </div>

    <!-- Start Modal -->
    <div class="modal active" id="startModal">
      <div class="modal-content">
        <div class="modal-emoji">ğŸ¦ğŸŒ</div>
        <h2 class="modal-title">Animal Kingdom Match</h2>
        <p class="modal-text">Learn about animals and where they live!</p>
        <ul class="instructions-list">
          <li>ğŸ¾ <strong>Drag</strong> each animal to its correct habitat</li>
          <li>â±ï¸ Match all animals before time runs out</li>
          <li>â­ Earn bonus points for fast matches</li>
          <li>ğŸ“ˆ Complete 3 levels to win!</li>
        </ul>
        <button class="btn" onclick="startGame()">Start Adventure!</button>
      </div>
    </div>

    <!-- Level Complete Modal -->
    <div class="modal" id="levelModal">
      <div class="modal-content">
        <div class="modal-emoji">ğŸ‰</div>
        <h2 class="modal-title">Level Complete!</h2>
        <div class="score-display" id="levelScore"></div>
        <p class="modal-text" id="levelMessage"></p>
        <button class="btn" onclick="nextLevel()">Next Level</button>
      </div>
    </div>

    <!-- Game Over Modal -->
    <div class="modal" id="gameOverModal">
      <div class="modal-content">
        <div class="modal-emoji" id="gameOverEmoji">â°</div>
        <h2 class="modal-title" id="gameOverTitle">Time's Up!</h2>
        <p class="modal-text" id="gameOverMessage">Don't worry, try again!</p>
        <div class="score-display">
          Final Score: <span id="finalScore">0</span>
        </div>
        <button class="btn" onclick="restartGame()">Try Again</button>
      </div>
    </div>

    <!-- Victory Modal -->
    <div class="modal" id="victoryModal">
      <div class="modal-content">
        <div class="modal-emoji">ğŸ†</div>
        <h2 class="modal-title">Amazing Wildlife Expert!</h2>
        <p class="modal-text">You matched all animals to their habitats!</p>
        <div class="score-display">
          Total Score: <span id="victoryScore">0</span>
          <div id="starRating"></div>
        </div>
        <p class="modal-text" id="funFact"></p>
        <button class="btn" onclick="restartGame()">Play Again</button>
      </div>
    </div>

    <script>
      // Game data - Animals and their habitats
      const gameData = {
        levels: [
          {
            name: 'Beginner',
            time: 60,
            animals: [
              { emoji: 'ğŸ¦', name: 'Lion', habitat: 'savanna' },
              { emoji: 'ğŸ§', name: 'Penguin', habitat: 'arctic' },
              { emoji: 'ğŸ ', name: 'Fish', habitat: 'ocean' },
              { emoji: 'ğŸ¦œ', name: 'Parrot', habitat: 'rainforest' },
            ],
            habitats: [
              { id: 'savanna', emoji: 'ğŸŒ¾', name: 'Savanna' },
              { id: 'arctic', emoji: 'ğŸ§Š', name: 'Arctic' },
              { id: 'ocean', emoji: 'ğŸŒŠ', name: 'Ocean' },
              { id: 'rainforest', emoji: 'ğŸŒ´', name: 'Rainforest' },
            ],
          },
          {
            name: 'Explorer',
            time: 75,
            animals: [
              { emoji: 'ğŸª', name: 'Camel', habitat: 'desert' },
              { emoji: 'ğŸ¦ˆ', name: 'Shark', habitat: 'ocean' },
              { emoji: 'ğŸ»', name: 'Bear', habitat: 'forest' },
              { emoji: 'ğŸ¦©', name: 'Flamingo', habitat: 'wetland' },
              { emoji: 'ğŸ¦', name: 'Lizard', habitat: 'desert' },
              { emoji: 'ğŸ¦Œ', name: 'Deer', habitat: 'forest' },
            ],
            habitats: [
              { id: 'desert', emoji: 'ğŸœï¸', name: 'Desert' },
              { id: 'ocean', emoji: 'ğŸŒŠ', name: 'Ocean' },
              { id: 'forest', emoji: 'ğŸŒ²', name: 'Forest' },
              { id: 'wetland', emoji: 'ğŸ¦¢', name: 'Wetland' },
            ],
          },
          {
            name: 'Expert',
            time: 90,
            animals: [
              { emoji: 'ğŸ¦§', name: 'Orangutan', habitat: 'rainforest' },
              { emoji: 'ğŸ¦¬', name: 'Bison', habitat: 'grassland' },
              { emoji: 'ğŸ‹', name: 'Whale', habitat: 'ocean' },
              { emoji: 'ğŸ¦…', name: 'Eagle', habitat: 'mountains' },
              { emoji: 'ğŸ¦«', name: 'Beaver', habitat: 'wetland' },
              { emoji: 'ğŸ¦™', name: 'Llama', habitat: 'mountains' },
              { emoji: 'ğŸŠ', name: 'Crocodile', habitat: 'wetland' },
              { emoji: 'ğŸ¦“', name: 'Zebra', habitat: 'grassland' },
            ],
            habitats: [
              { id: 'rainforest', emoji: 'ğŸŒ´', name: 'Rainforest' },
              { id: 'grassland', emoji: 'ğŸŒ¾', name: 'Grassland' },
              { id: 'ocean', emoji: 'ğŸŒŠ', name: 'Ocean' },
              { id: 'mountains', emoji: 'ğŸ”ï¸', name: 'Mountains' },
              { id: 'wetland', emoji: 'ğŸ¦¢', name: 'Wetland' },
            ],
          },
        ],
        funFacts: [
          'ğŸ¦ Lions are the only cats that live in groups called prides!',
          'ğŸ§ Penguins can drink salt water because they have special glands!',
          'ğŸ¦œ Parrots can live for over 80 years in the wild!',
          'ğŸª Camels can go weeks without drinking water!',
          'ğŸ¦ˆ Sharks have been around for over 400 million years!',
          'ğŸ» Bears can run as fast as 35 miles per hour!',
          'ğŸ¦§ Orangutans share 97% of their DNA with humans!',
          'ğŸ‹ Blue whales are the largest animals ever to exist!',
        ],
      };

      // Game state
      let currentLevel = 0;
      let score = 0;
      let matches = 0;
      let totalAnimals = 0;
      let timeLeft = 60;
      let timer = null;
      let draggedAnimal = null;

      // Initialize game
      function init() {
        updateLevelIndicator();
        document.getElementById('startModal').classList.add('active');
      }

      function updateLevelIndicator() {
        const indicator = document.getElementById('levelIndicator');
        indicator.innerHTML = '';
        for (let i = 0; i < gameData.levels.length; i++) {
          const dot = document.createElement('div');
          dot.className = 'level-dot';
          if (i < currentLevel) dot.classList.add('completed');
          if (i === currentLevel) dot.classList.add('active');
          indicator.appendChild(dot);
        }
      }

      function startGame() {
        document.getElementById('startModal').classList.remove('active');
        loadLevel(currentLevel);
      }

      function loadLevel(levelIndex) {
        const level = gameData.levels[levelIndex];
        matches = 0;
        totalAnimals = level.animals.length;
        timeLeft = level.time;

        // Update displays
        document.getElementById('levelDisplay').textContent = levelIndex + 1;
        document.getElementById('matchesDisplay').textContent =
          `0/${totalAnimals}`;
        document.getElementById('timeDisplay').textContent = timeLeft;
        updateTimerBar();

        // Render animals (shuffled)
        const animalsGrid = document.getElementById('animalsGrid');
        animalsGrid.innerHTML = '';
        const shuffledAnimals = [...level.animals].sort(
          () => Math.random() - 0.5
        );

        shuffledAnimals.forEach((animal, index) => {
          const card = document.createElement('div');
          card.className = 'animal-card';
          card.draggable = true;
          card.dataset.habitat = animal.habitat;
          card.dataset.name = animal.name;
          card.innerHTML = `
                    <div class="animal-emoji">${animal.emoji}</div>
                    <div class="animal-name">${animal.name}</div>
                `;

          // Drag events
          card.addEventListener('dragstart', handleDragStart);
          card.addEventListener('dragend', handleDragEnd);

          // Touch events for mobile
          card.addEventListener('touchstart', handleTouchStart, {
            passive: false,
          });
          card.addEventListener('touchmove', handleTouchMove, {
            passive: false,
          });
          card.addEventListener('touchend', handleTouchEnd);

          animalsGrid.appendChild(card);
        });

        // Render habitats
        const habitatsGrid = document.getElementById('habitatsGrid');
        habitatsGrid.innerHTML = '';

        level.habitats.forEach((habitat) => {
          const zone = document.createElement('div');
          zone.className = 'habitat-zone';
          zone.dataset.habitatId = habitat.id;
          zone.innerHTML = `
                    <div class="habitat-info">
                        <div class="habitat-emoji">${habitat.emoji}</div>
                        <div class="habitat-name">${habitat.name}</div>
                    </div>
                    <div class="habitat-drop-area" data-habitat="${habitat.id}"></div>
                `;

          // Drop events
          zone.addEventListener('dragover', handleDragOver);
          zone.addEventListener('dragleave', handleDragLeave);
          zone.addEventListener('drop', handleDrop);

          habitatsGrid.appendChild(zone);
        });

        // Start timer
        startTimer();
      }

      // Drag and Drop handlers
      function handleDragStart(e) {
        draggedAnimal = e.target;
        e.target.classList.add('dragging');
        e.dataTransfer.setData('text/plain', '');
      }

      function handleDragEnd(e) {
        e.target.classList.remove('dragging');
        draggedAnimal = null;
      }

      function handleDragOver(e) {
        e.preventDefault();
        const zone = e.target.closest('.habitat-zone');
        if (zone) zone.classList.add('drag-over');
      }

      function handleDragLeave(e) {
        const zone = e.target.closest('.habitat-zone');
        if (zone) zone.classList.remove('drag-over');
      }

      function handleDrop(e) {
        e.preventDefault();
        const zone = e.target.closest('.habitat-zone');
        if (!zone || !draggedAnimal) return;

        zone.classList.remove('drag-over');

        const animalHabitat = draggedAnimal.dataset.habitat;
        const zoneHabitat = zone.dataset.habitatId;

        if (animalHabitat === zoneHabitat) {
          handleCorrectMatch(draggedAnimal, zone);
        } else {
          handleWrongMatch(zone);
        }
      }

      // Touch handlers for mobile
      let touchClone = null;
      let touchStartX, touchStartY;

      function handleTouchStart(e) {
        if (e.target.closest('.animal-card').classList.contains('matched'))
          return;

        draggedAnimal = e.target.closest('.animal-card');
        touchStartX = e.touches[0].clientX;
        touchStartY = e.touches[0].clientY;

        // Create visual clone
        touchClone = draggedAnimal.cloneNode(true);
        touchClone.style.position = 'fixed';
        touchClone.style.pointerEvents = 'none';
        touchClone.style.zIndex = '1000';
        touchClone.style.opacity = '0.8';
        touchClone.style.transform = 'scale(1.1)';
        document.body.appendChild(touchClone);

        draggedAnimal.classList.add('dragging');
      }

      function handleTouchMove(e) {
        if (!touchClone) return;
        e.preventDefault();

        const touch = e.touches[0];
        touchClone.style.left = touch.clientX - 40 + 'px';
        touchClone.style.top = touch.clientY - 40 + 'px';

        // Highlight habitat under touch
        const element = document.elementFromPoint(touch.clientX, touch.clientY);
        const zone = element?.closest('.habitat-zone');

        document
          .querySelectorAll('.habitat-zone')
          .forEach((z) => z.classList.remove('drag-over'));
        if (zone) zone.classList.add('drag-over');
      }

      function handleTouchEnd(e) {
        if (!draggedAnimal) return;

        const touch = e.changedTouches[0];
        const element = document.elementFromPoint(touch.clientX, touch.clientY);
        const zone = element?.closest('.habitat-zone');

        if (zone) {
          const animalHabitat = draggedAnimal.dataset.habitat;
          const zoneHabitat = zone.dataset.habitatId;

          if (animalHabitat === zoneHabitat) {
            handleCorrectMatch(draggedAnimal, zone);
          } else {
            handleWrongMatch(zone);
          }
        }

        // Cleanup
        draggedAnimal.classList.remove('dragging');
        document
          .querySelectorAll('.habitat-zone')
          .forEach((z) => z.classList.remove('drag-over'));
        if (touchClone) {
          touchClone.remove();
          touchClone = null;
        }
        draggedAnimal = null;
      }

      function handleCorrectMatch(animal, zone) {
        // Play success feedback
        animal.classList.add('matched');
        zone.classList.add('correct');

        // Add animal to habitat
        const dropArea = zone.querySelector('.habitat-drop-area');
        const matchedAnimal = document.createElement('div');
        matchedAnimal.className = 'matched-animal';
        matchedAnimal.innerHTML = `${animal.querySelector('.animal-emoji').textContent}<span>${animal.dataset.name}</span>`;
        dropArea.appendChild(matchedAnimal);

        // Update score and matches
        const timeBonus = Math.floor(timeLeft / 5);
        const pointsEarned = 100 + timeBonus;
        score += pointsEarned;
        matches++;

        document.getElementById('scoreDisplay').textContent = score;
        document.getElementById('matchesDisplay').textContent =
          `${matches}/${totalAnimals}`;

        // Check level complete
        setTimeout(() => {
          zone.classList.remove('correct');
          if (matches === totalAnimals) {
            levelComplete();
          }
        }, 500);
      }

      function handleWrongMatch(zone) {
        zone.classList.add('wrong');
        score = Math.max(0, score - 25);
        document.getElementById('scoreDisplay').textContent = score;

        setTimeout(() => {
          zone.classList.remove('wrong');
        }, 500);
      }

      function startTimer() {
        if (timer) clearInterval(timer);

        timer = setInterval(() => {
          timeLeft--;
          document.getElementById('timeDisplay').textContent = timeLeft;
          updateTimerBar();

          if (timeLeft <= 0) {
            clearInterval(timer);
            gameOver();
          }
        }, 1000);
      }

      function updateTimerBar() {
        const level = gameData.levels[currentLevel];
        const percentage = (timeLeft / level.time) * 100;
        const fill = document.getElementById('timerFill');
        fill.style.width = percentage + '%';

        fill.classList.remove('warning', 'danger');
        if (percentage <= 20) {
          fill.classList.add('danger');
        } else if (percentage <= 40) {
          fill.classList.add('warning');
        }
      }

      function levelComplete() {
        clearInterval(timer);

        const levelScore = document.getElementById('levelScore');
        const levelMessage = document.getElementById('levelMessage');

        levelScore.textContent = `Score: ${score}`;

        if (currentLevel < gameData.levels.length - 1) {
          levelMessage.textContent = `Great job! Ready for ${gameData.levels[currentLevel + 1].name} level?`;
          document.getElementById('levelModal').classList.add('active');
        } else {
          showVictory();
        }
      }

      function nextLevel() {
        document.getElementById('levelModal').classList.remove('active');
        currentLevel++;
        updateLevelIndicator();
        loadLevel(currentLevel);
      }

      function gameOver() {
        clearInterval(timer);
        document.getElementById('finalScore').textContent = score;
        document.getElementById('gameOverModal').classList.add('active');
      }

      function showVictory() {
        document.getElementById('victoryScore').textContent = score;

        // Star rating
        const starRating = document.getElementById('starRating');
        let stars = 1;
        if (score >= 800) stars = 3;
        else if (score >= 500) stars = 2;
        starRating.innerHTML =
          '<span class="star">â˜…</span>'.repeat(stars) +
          '<span class="star" style="opacity:0.3">â˜…</span>'.repeat(3 - stars);

        // Random fun fact
        const fact =
          gameData.funFacts[
            Math.floor(Math.random() * gameData.funFacts.length)
          ];
        document.getElementById('funFact').textContent = fact;

        document.getElementById('victoryModal').classList.add('active');
      }

      function restartGame() {
        document
          .querySelectorAll('.modal')
          .forEach((m) => m.classList.remove('active'));
        currentLevel = 0;
        score = 0;
        updateLevelIndicator();
        document.getElementById('scoreDisplay').textContent = '0';
        document.getElementById('startModal').classList.add('active');
      }

      // Initialize on load
      window.onload = init;
    </script>
  </body>
</html>
