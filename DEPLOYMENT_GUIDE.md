# ğŸš€ Deployment Guide - Learning Adventures Platform

## Vercel Deployment with Custom Domains

This guide walks you through deploying the Learning Adventures Platform to Vercel with custom domains.

---

## ğŸ“‹ Prerequisites

- Vercel account (sign up at https://vercel.com)
- Domain ownership: `learningadventures.org`
- Git repository pushed to GitHub
- Node.js 18+ installed locally

---

## ğŸ”§ Step 1: Prepare Your Repository

### 1.1 Ensure all code is committed and pushed

```bash
cd learning-adventures-app
git status
git add .
git commit -m "Prepare for production deployment"
git push origin claude/build-html-structure-01563Z6oc9xfDMaXCZDzQ88y
```

### 1.2 Merge to main branch (or your production branch)

```bash
git checkout main
git merge claude/build-html-structure-01563Z6oc9xfDMaXCZDzQ88y
git push origin main
```

---

## ğŸŒ Step 2: Set Up Vercel Project

### 2.1 Install Vercel CLI (optional but recommended)

```bash
npm install -g vercel
```

### 2.2 Link your GitHub repository

1. Go to https://vercel.com/dashboard
2. Click "Add New Project"
3. Import your `learning-adventures-platform` repository
4. Select the `learning-adventures-app` directory as the root

### 2.3 Configure Build Settings

**Framework Preset:** Next.js
**Build Command:** `npm run build`
**Output Directory:** `.next`
**Install Command:** `npm install`
**Root Directory:** `learning-adventures-app`

---

## ğŸ—„ï¸ Step 3: Set Up Vercel Postgres

### 3.1 Create Postgres Database

1. In your Vercel project dashboard, go to **Storage**
2. Click **Create Database**
3. Select **Postgres**
4. Choose **Serverless SQL** (recommended for this app)
5. Name it: `learning-adventures-db`
6. Select region closest to your users (e.g., `iad1` for US East)

### 3.2 Automatically Connect Database

Vercel will automatically add `POSTGRES_*` environment variables to your project.

---

## ğŸ” Step 4: Configure Environment Variables

Go to **Settings** â†’ **Environment Variables** and add:

### Required Variables

| Variable | Value | Notes |
|----------|-------|-------|
| `DATABASE_URL` | Auto-generated by Vercel Postgres | Connection string |
| `NEXTAUTH_URL` | `https://app.learningadventures.org` | Your app domain |
| `NEXTAUTH_SECRET` | Generate with `openssl rand -base64 32` | Keep this secret! |

### Example `.env.production`

```bash
# Database (Auto-generated by Vercel)
DATABASE_URL="postgres://..."

# NextAuth
NEXTAUTH_URL="https://app.learningadventures.org"
NEXTAUTH_SECRET="your-super-secret-key-here-change-this"
```

---

## ğŸŒ Step 5: Configure Custom Domains

### 5.1 Add Domains in Vercel

1. Go to **Settings** â†’ **Domains**
2. Add two domains:
   - `app.learningadventures.org` (primary app)
   - `learningadventures.org` (marketing site - temporary)

### 5.2 Update DNS Records

In your domain registrar (e.g., Namecheap, GoDaddy, Cloudflare):

#### For `app.learningadventures.org`:
```
Type: CNAME
Name: app
Value: cname.vercel-dns.com
TTL: 3600
```

#### For root domain `learningadventures.org`:
```
Type: A
Name: @
Value: 76.76.21.21
TTL: 3600
```

```
Type: CNAME
Name: www
Value: cname.vercel-dns.com
TTL: 3600
```

### 5.3 Wait for DNS Propagation

- Usually takes 5-30 minutes
- Check status: `nslookup app.learningadventures.org`
- Vercel will show âœ… when domains are ready

---

## ğŸ—ƒï¸ Step 6: Initialize Database

### 6.1 Generate Prisma Client

This happens automatically during `npm run build`, but you can also run:

```bash
npx prisma generate
```

### 6.2 Push Database Schema

Connect to your Vercel Postgres database:

```bash
# Get DATABASE_URL from Vercel dashboard
export DATABASE_URL="your-vercel-postgres-url"

# Push schema
npx prisma db push
```

### 6.3 Seed Database

```bash
# Seed basic users and data
npm run db:seed

# Seed test games and admin users
npm run db:seed:test-games
```

This creates:
- âœ… 3 admin user accounts
- âœ… 13 math test games in approval workflow
- âœ… Sample students, teachers, parents

---

## ğŸ”‘ Step 7: Admin Access

### 7.1 Admin Login Credentials

After running seed:

```
Email: admin1@learningadventures.org
Password: admin123

(Also: admin2@learningadventures.org, admin3@learningadventures.org)
```

**ğŸš¨ IMPORTANT:** Change these passwords immediately after first login!

### 7.2 Access Admin Dashboard

1. Go to: `https://app.learningadventures.org/admin/test-games`
2. Login with admin credentials
3. You'll see all 13 math games ready for testing

---

## ğŸ® Step 8: Test Game Approval Workflow

### 8.1 Access Test Games Dashboard

Navigate to: `https://app.learningadventures.org/admin/test-games`

### 8.2 Workflow Steps

1. **Select a game** from the list
2. **Preview** the game in iframe
3. **Test thoroughly**:
   - Educational quality
   - Technical functionality
   - Accessibility (keyboard nav, screen readers)
   - Mobile responsiveness
4. **Add Feedback** with notes/bugs
5. **Approve/Reject**:
   - âœ… Approve â†’ Game status = "APPROVED"
   - âŒ Reject â†’ Game status = "REJECTED"
   - ğŸ”„ Request Changes â†’ Game status = "NEEDS_REVISION"
6. **Promote to Catalog** (one-click button)
   - Auto-adds to `lib/catalogData.ts`
   - Makes game publicly available

---

## ğŸ“Š Step 9: Monitoring & Maintenance

### 9.1 View Deployment Logs

```bash
vercel logs
```

Or in dashboard: **Deployments** â†’ Select deployment â†’ **Logs**

### 9.2 Check Database

```bash
# Connect to production database
npx prisma studio
```

Or use Vercel's built-in **Data** tab.

### 9.3 Monitor Game Approvals

Admin dashboard shows:
- Total games by status
- Approval history
- Feedback/notes
- Who approved/rejected

---

## ğŸ”’ Security Checklist

Before going live:

- [ ] Change all default admin passwords
- [ ] Set strong `NEXTAUTH_SECRET`
- [ ] Enable Vercel's **Password Protection** for staging
- [ ] Set up **Error Tracking** (Sentry integration)
- [ ] Configure **Analytics** (Vercel Analytics or Google Analytics)
- [ ] Review **Environment Variables** (no secrets in code!)
- [ ] Enable **HTTPS only** (automatic with Vercel)
- [ ] Set up **Backups** for Postgres database

---

## ğŸš¨ Troubleshooting

### Build Fails

```bash
# Check build logs in Vercel dashboard
# Common issues:
- Missing environment variables
- TypeScript errors
- Prisma client not generated
```

**Fix:**
```bash
# Locally test build
npm run build

# If Prisma issues:
npx prisma generate
npm run build
```

### Database Connection Errors

```bash
# Verify DATABASE_URL is set correctly
# Check Vercel â†’ Settings â†’ Environment Variables
```

### Games Not Appearing

```bash
# Ensure files exist in public/games/
ls learning-adventures-app/public/games/

# Check test-games.md for URLs
cat docs/test-games.md
```

### Can't Access Admin Dashboard

```bash
# Verify user role in database
npx prisma studio

# Or create admin manually:
npx tsx prisma/seed-test-games.ts
```

---

## ğŸ“ Support & Resources

- **Vercel Docs:** https://vercel.com/docs
- **Next.js Docs:** https://nextjs.org/docs
- **Prisma Docs:** https://www.prisma.io/docs
- **NextAuth Docs:** https://next-auth.js.org

---

## ğŸ‰ You're Live!

Your platform is now deployed at:

- ğŸŒ **App:** https://app.learningadventures.org
- ğŸ® **Games:** https://app.learningadventures.org/games/[game-name].html
- ğŸ‘¨â€ğŸ’¼ **Admin:** https://app.learningadventures.org/admin/test-games
- ğŸ“š **Catalog:** https://app.learningadventures.org/catalog

**Next Steps:**
1. Test all 13 math games with your team
2. Approve games and promote to catalog
3. Invite more team members
4. Monitor user feedback
5. Keep building more educational content!

---

**Last Updated:** November 2025
**Version:** 1.0.0
**Deployed By:** Learning Adventures Team
